## 目标
- 优化“预取下一集”的策略与资源控制
- 在质量面板中图形化显示关键指标（带宽/缓冲）并节流
- 增加评分权重“恢复默认/设备自适应”按钮
- 完善按钮的 ARIA 标签与键盘可达性

## 具体实施
- 预取策略（src/app/play/page.tsx）
  - 用 AbortController + 短超时（1.5s）执行 HEAD（无须下载主体；若不支持则回退 GET），并在切源时主动 abort，避免占用带宽。
  - 条件控制：移动端或弱网（参考 `src/lib/networkDetection.ts` 判断国内/网络环境）时禁用预取；当当前播放缓冲低于阈值（如 <2s）也暂缓预取。
  - 隔离失败：预取失败不影响当前播放状态，不显示错误，仅做降级。
  - 代码位置：现有预取 effect（约 1204–1214）替换为带 AbortController 的 HEAD/GET；在切源与组件卸载处清理。

- 质量图形化（src/app/play/page.tsx）
  - 在面板中新增两条迷你折线：带宽（Mbps）与缓冲（秒），使用轻量 SVG，不引入第三方库。
  - 指标采集：复用现有 interval（约 4480–4539），保留最近 N（如 30）个点，窗口滑动；面板关闭时停止采集（现已实现）。
  - 节流：将采样周期统一为 500–1000ms，根据设备与 FPS 自适应（PC 500ms/移动 1000ms）。
  - UI：在 `src/app/play/page.tsx:4960–5010` 面板内新增图形块，显示两条曲线与当前值。

- 权重按钮（src/app/play/page.tsx）
  - 在权重滑杆旁新增两按钮：
    - “恢复默认” → 设置为 40/40/20 并持久化到 `localStorage: scoreWeights`
    - “设备自适应” → 根据移动/弱网将延迟权重提高（如 30–40%），其它权重按比例归一
  - 代码位置：权重控件块（约 5073–5140）下方新增按钮，复用已有 `scoreWeightsRef`。

- 可访问性（src/app/play/page.tsx / src/components/NetDiskSearchResults.tsx）
  - 为质量、跳过、收藏、网盘等按钮添加 `aria-label` 与清晰的 `title`；将关键操作按钮置于合理 Tab 顺序。
  - 键盘操作：在质量面板内为滑杆与按钮提供键盘可用性（左右键微调、Enter 触发开关）。
  - 代码位置：
    - 播放器页左上质量按钮与面板（约 4921–4956, 4960–5140）
    - 跳过与收藏按钮（约 5145–5172）
    - 网盘卡片已有部分 ARIA（已添加“复制/打开/切换密码显示”），继续补齐缺失项。

## 验证
- 预取：在桌面与移动设备下切集，观察请求被短超时或 abort，当前播放无影响；弱网与缓冲不足场景预取被抑制。
- 图形化：面板打开显示曲线，曲线在 30 点窗口内平滑更新；面板关闭停止采集。
- 权重按钮：点击后滑杆与评分即时联动，权重被正确持久化。
- ARIA：按钮能被屏幕阅读器读出，滑杆支持键盘微调。

## 里程碑推进
- M2-1：实现预取策略与清理；完成图形化采集栈与曲线渲染
- M2-2：加入权重按钮；完善 ARIA 与键盘可达
- M2-3：回归测试与性能核查（采样节流与资源释放）